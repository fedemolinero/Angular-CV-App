<div class="container-fluid" id="loginContainer">

  <div class="row">

    <div class="col-6">

      <h1 id="loginTitle">LOGIN</h1>

      <form [formGroup]="loginForm" (ngSubmit)="login()" id="loginForm">

        <div class="input-group mt-1 mb-5">
          <label for="username" class="input-group-text">Username</label>
          <input autofocus id="username" type="text" class="form-control form-control-lg" formControlName="username"
            [ngClass]="{
              'is-valid': username?.valid && (username?.dirty || username?.touched),
              'is-invalid': username?.invalid && (username?.dirty || username?.touched)
            }" aria-labelledby="usernameLabel"
            aria-describedby="validationRequiredUsernameFeedback validationMinUsernameFeedback validationMaxUsernameFeedback"
            (blur)="username?.markAsTouched()">

          <!-- Username validation feedback -->
          <div *ngIf="username?.errors?.['required'] && username?.touched" id="validationRequiredUsernameFeedback"
            class="invalid-feedback" role="alert">
            Username is required.
          </div>
          <div *ngIf="username?.errors?.['minlength'] && username?.touched" id="validationMinUsernameFeedback"
            class="invalid-feedback" role="alert">
            Username must be at least 6 characters long.
          </div>
          <div *ngIf="username?.errors?.['maxlength'] && username?.touched" id="validationMaxUsernameFeedback"
            class="invalid-feedback" role="alert">
            Username must have less than 20 characters long.
          </div>

        </div>

        <div class="input-group mt-1 mb-5">
          <label for="password" class="input-group-text">Password</label>
          <input id="password" type="password" class="form-control form-control-lg" formControlName="password"
            [ngClass]="{
              'is-valid': password?.valid && (password?.dirty || password?.touched),
              'is-invalid': password?.invalid && (password?.dirty || password?.touched)
            }" aria-labelledby="passwordLabel"
            aria-describedby="validationRequiredPasswordFeedback validationPasswordRequirementsFeedback validationIncorrectPasswordFeedback validationMinPasswordFeedback"
            required (blur)="password?.markAsTouched()">

          <!-- Password validation feedback -->
          <div *ngIf="password?.errors?.['required'] && password?.touched" id="validationRequiredPasswordFeedback"
            class="invalid-feedback" role="alert">
            Password is required.
          </div>
          <div *ngIf="password?.errors?.['minlength'] && password?.touched" id="validationMinPasswordFeedback"
            class="invalid-feedback" role="alert">
            Password must be at least 6 characters long.
          </div>
          <div *ngIf="password?.errors?.['maxlength'] && password?.touched" id="validationMaxPasswordFeedback"
            class="invalid-feedback" role="alert">
            Password must have less than 20 characters long.
          </div>
          <div *ngIf="password?.errors?.['is-incorrect'] && password?.touched" id="validationIncorrectPasswordFeedback"
            class="invalid-feedback" role="alert">
            Password is incorrect.
          </div>
          <div *ngIf="password?.errors?.['passwordRequirements'] && username?.touched"
            id="validationPasswordRequirementsFeedback" class="invalid-feedback" role="alert">
            Password must contain at least one uppercase letter and one number.
          </div>

        </div>

        <!-- Conditional component -->
        <app-login-timeout *ngIf="disabledLogin" [timeoutMinutes]="1"></app-login-timeout>

        <!-- Login button -->
        <button type="submit" class="btn btn-primary btn-lg w-100 btn-block mt-3 mb-3" id="loginButton"
          [disabled]="loginForm.invalid || disabledLogin">
          <span>LOGIN</span>
        </button>
        <!-- Forgot password link -->
        <a routerLink="/forgot-password" class="forgot-password-link" id="forgotPasswordLink">Forgot password?</a>

        <!-- Loading indicator -->
        <app-loading *ngIf="loading" [message]="'Loading'" [backgroundColor]="'#f0ad4e'"></app-loading>

        <!-- Register button -->
        <button routerLink="/register" class="btn btn-outline-primary btn-lg w-100 btn-block mt-3 mb-3"
          id="registerButton">
          REGISTER
        </button>

      </form>

    </div>

    <div class="col-6">
      <img src="assets/svg/websiteLogin.svg" alt="Login illustration" id="loginIllustration">
    </div>

  </div>

</div>